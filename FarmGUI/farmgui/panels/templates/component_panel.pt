<div class="panel panel-default">
    <div class="panel-heading">
        <a href="${delete_href}" class="close">delete</a>

        <h2>${component.name}</h2>
    </div>
    <div class="panel-body">

        <a data-toggle="modal" href="#add_parameter_modal_${component._id}" class="btn btn-primary">Add Parameter</a>
        <a data-toggle="modal" href="#add_device_modal_${component._id}" class="btn btn-primary">Add Device</a>
        <a data-toggle="modal" href="#add_regulator_modal_${component._id}" class="btn btn-primary">Add Regulator</a>

        <div tal:repeat="p component.parameters">
            ${panel('parameter_panel', p.id)}
        </div>

        <div tal:repeat="d component.devices">
            ${panel('device_panel', d.id)}
        </div>

        <div tal:repeat="r component.regulators">
            ${panel('regulator_panel', r.id)}
        </div>

        <div class="modal" id="add_parameter_modal_${component._id}">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title">Define new Parameter for ${component.name}</h4>
                    </div>
                    <div class="modal-body">
                        <tal:form replace="structure add_parameter_form"/>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal" id="add_device_modal_${component._id}">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title">Define new Device for ${component.name}</h4>
                    </div>
                    <div class="modal-body">
                        <tal:form replace="structure add_device_form"/>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal" id="add_regulator_modal_${component._id}">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title">Define new Regulator for ${component.name}</h4>
                    </div>
                    <div class="modal-body">
                        <tal:form replace="structure add_regulator_form"/>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div><!-- /.container-fluid -->